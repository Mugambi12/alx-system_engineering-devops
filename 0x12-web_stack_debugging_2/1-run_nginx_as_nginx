#!/usr/bin/env bash
# Hybrid script to configure Nginx to run as nginx user and listen on port 8080

# Kill Apache2 server
sudo pkill -f apache2

# Sleep for 10 seconds
sleep 10

# Update Nginx configuration
sed -i 's/#user www-data/user nginx/' /etc/nginx/nginx.conf
sed -i 's/80/8080/g' /etc/nginx/sites-available/default

# Set proper permissions for nginx.conf
chmod 644 /etc/nginx/nginx.conf

# Restart Nginx
sudo -u nginx service nginx start
